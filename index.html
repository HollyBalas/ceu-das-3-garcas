<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>O Céu dos Nomes | Aeternum</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-color: #020205;
            --gold: #d4af37;
            --gold-light: #f3e5ab;
            --text-main: rgba(255, 255, 255, 0.9);
            --text-muted: rgba(255, 255, 255, 0.4);
            --transition-slow: all 1.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        /* Efeito de Fade-in Inicial */
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Lora', serif;
            overflow: hidden;
            user-select: none;
            opacity: 0;
            transition: opacity 2.5s ease-in-out;
        }

        body.loaded { opacity: 1; }

        #sky-container {
            position: absolute;
            top: -5%; left: -5%; width: 110%; height: 110%;
            z-index: 1;
            transition: transform 0.2s ease-out;
        }

        canvas { display: block; width: 100%; height: 100%; }

        /* --- GARÇAS ARTÍSTICAS --- */
        .herons-layer {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2;
            pointer-events: none;
        }

        .heron {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            opacity: 0.5;
            animation: float 8s ease-in-out infinite alternate;
            transition: var(--transition-slow);
        }

        .bird-svg {
            width: 45px;
            height: auto;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.2));
        }

        .heron-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-family: 'Cinzel', serif;
            font-size: 0.75rem;
            color: var(--gold-light);
            letter-spacing: 2px;
            text-transform: lowercase;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        .insta-icon { width: 12px; fill: var(--gold-light); opacity: 0.8; }

        /* Posição Desktop (Triangular) */
        .h1 { top: 15%; left: 20%; animation-delay: 0s; }
        .h2 { top: 30%; right: 15%; animation-delay: -3s; }
        .h3 { bottom: 20%; left: 30%; animation-delay: -5s; }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(-1deg); }
            100% { transform: translate(15px, -25px) rotate(1deg); }
        }

        /* --- CONTEÚDO CENTRAL --- */
        main {
            position: relative;
            z-index: 10;
            width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: radial-gradient(circle at center, transparent 0%, rgba(2,2,5,0.6) 100%);
            pointer-events: none;
        }

        .content-wrapper {
            pointer-events: auto;
            max-width: 600px;
            padding: 40px;
        }

        h1 {
            font-family: 'Cinzel', serif;
            font-weight: 400;
            font-size: 2.2rem;
            line-height: 1.6;
            letter-spacing: 5px;
            color: var(--gold-light);
            text-shadow: 0 0 30px rgba(212, 175, 55, 0.15);
            margin-bottom: 25px;
            text-transform: uppercase;
        }

        .subtext {
            font-size: 0.9rem;
            font-style: italic;
            color: var(--text-muted);
            letter-spacing: 6px;
            margin-bottom: 45px;
            text-transform: lowercase;
        }

        button#open-modal-btn {
            background: transparent;
            border: 1px solid rgba(212, 175, 55, 0.25);
            color: var(--gold);
            font-family: 'Cinzel', serif;
            font-size: 0.85rem;
            letter-spacing: 4px;
            padding: 18px 45px;
            cursor: pointer;
            transition: all 0.5s ease;
            backdrop-filter: blur(4px);
        }

        button#open-modal-btn:hover {
            border-color: var(--gold);
            background: rgba(212, 175, 55, 0.05);
            letter-spacing: 6px;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.1);
        }

        .counter {
            position: absolute;
            bottom: 40px;
            font-size: 0.7rem;
            color: var(--text-muted);
            letter-spacing: 3px;
            font-family: 'Cinzel', serif;
            text-transform: uppercase;
        }

        /* --- MODAL --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(2, 2, 5, 0.95);
            backdrop-filter: blur(15px);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.6s ease;
        }

        .modal-overlay.active { opacity: 1; pointer-events: auto; }

        .modal-content {
            border: 1px solid rgba(212, 175, 55, 0.1);
            padding: 60px 40px;
            text-align: center;
            width: 90%;
            max-width: 420px;
            position: relative;
        }

        .modal-content h2 {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 40px;
            letter-spacing: 3px;
        }

        input {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            color: #fff;
            font-family: 'Lora', serif;
            font-size: 1.1rem;
            padding: 12px;
            width: 100%;
            text-align: center;
            outline: none;
            margin-bottom: 30px;
            transition: border-color 0.4s;
        }

        input:focus { border-bottom-color: var(--gold); }

        .close-btn {
            position: absolute;
            top: 20px; right: 20px;
            background: none; border: none;
            color: var(--text-muted);
            font-size: 1.8rem;
            cursor: pointer;
        }

        .error-msg { color: #d9534f; font-size: 0.75rem; margin-top: -20px; margin-bottom: 20px; opacity: 0; transition: 0.3s; }

        /* --- AJUSTE MOBILE (O PONTO CHAVE) --- */
        @media (max-width: 768px) {
            h1 { font-size: 1.4rem; letter-spacing: 3px; }
            .subtext { font-size: 0.75rem; letter-spacing: 4px; }
            
            /* Reposicionando garças para não poluir o centro no celular */
            .h1 { top: 10%; left: 10%; }
            .h2 { top: 22%; right: 8%; left: auto; }
            .h3 { bottom: 15%; left: 50%; transform: translateX(-50%); }
            
            .modal-content { padding: 40px 20px; }
        }

        #step-2 { display: none; }
    </style>
</head>
<body>

    <div id="sky-container"><canvas id="sky"></canvas></div>

    <div class="herons-layer">
        <div class="heron h1">
            <svg class="bird-svg" viewBox="0 0 100 100">
                <path d="M10,50 C25,42 45,45 50,50 C55,45 75,42 90,50 C70,55 55,75 50,68 C45,75 30,55 10,50" fill="none" stroke="white" stroke-width="1" />
            </svg>
            <div class="heron-label">
                <svg class="insta-icon" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/></svg>
                junior
            </div>
        </div>
        <div class="heron h2">
            <svg class="bird-svg" viewBox="0 0 100 100">
                <path d="M10,50 C25,42 45,45 50,50 C55,45 75,42 90,50 C70,55 55,75 50,68 C45,75 30,55 10,50" fill="none" stroke="white" stroke-width="1" />
            </svg>
            <div class="heron-label">
                <svg class="insta-icon" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/></svg>
                holly
            </div>
        </div>
        <div class="heron h3">
            <svg class="bird-svg" viewBox="0 0 100 100">
                <path d="M10,50 C25,42 45,45 50,50 C55,45 75,42 90,50 C70,55 55,75 50,68 C45,75 30,55 10,50" fill="none" stroke="white" stroke-width="1" />
            </svg>
            <div class="heron-label">
                <svg class="insta-icon" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="currentColor"/></svg>
                denise
            </div>
        </div>
    </div>

    <main>
        <div class="content-wrapper">
            <h1>Alguns nomes não desaparecem.<br>Eles ficam no céu.</h1>
            <p class="subtext">disciplina constrói o céu</p>
            <button id="open-modal-btn">entrar no céu</button>
        </div>
        <div class="counter">lugares ocupados: <span id="count-display">0</span> / 333333</div>
    </main>

    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <button class="close-btn" id="close-modal-btn">&times;</button>
            <div id="step-1">
                <h2>O acesso requer virtude.</h2>
                <input type="password" id="secret-code" placeholder="palavra secreta..." autocomplete="off">
                <div class="error-msg" id="error-step-1"></div>
                <button id="verify-code-btn">validar</button>
            </div>
            <div id="step-2">
                <h2>Eternize um nome.</h2>
                <input type="text" id="insta-handle" placeholder="@instagram" autocomplete="off">
                <div class="error-msg" id="error-step-2"></div>
                <button id="add-star-btn">subir ao céu</button>
            </div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // CONFIGURAÇÃO FIREBASE (Substitua aqui)
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            authDomain: "SEU_PROJETO.firebaseapp.com",
            databaseURL: "https://SEU_PROJETO-default-rtdb.firebaseio.com",
            projectId: "SEU_PROJETO",
            storageBucket: "SEU_PROJETO.appspot.com",
            messagingSenderId: "SENDER_ID",
            appId: "APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const starsRef = ref(db, 'stars');

        // --- ENGINE DO CÉU ---
        const canvas = document.getElementById('sky');
        const ctx = canvas.getContext('2d');
        let width, height;
        let ambientStars = [];
        let globalStars = [];
        let mouseX = -1000, mouseY = -1000;
        let parallaxX = 0, parallaxY = 0;

        function resize() {
            width = window.innerWidth * 1.1; height = window.innerHeight * 1.1;
            canvas.width = width; canvas.height = height;
            ambientStars = [];
            for (let i = 0; i < 150; i++) {
                ambientStars.push({ x: Math.random()*width, y: Math.random()*height, r: Math.random()*1.1, p: Math.random()*10 });
            }
        }

        onValue(starsRef, (snap) => {
            const data = snap.val();
            globalStars = data ? Object.values(data) : [];
            document.getElementById('count-display').textContent = globalStars.length;
        });

        function draw() {
            ctx.clearRect(0, 0, width, height);
            
            // Fundo estático leve
            ctx.fillStyle = "white";
            ambientStars.forEach(s => {
                ctx.globalAlpha = 0.1 + Math.abs(Math.sin(Date.now()*0.0005 + s.p)) * 0.2;
                ctx.beginPath(); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2); ctx.fill();
            });

            // Estrelas de Nomes
            let hovered = null;
            globalStars.forEach(s => {
                const x = s.rx * width; const y = s.ry * height;
                const dx = x - (mouseX + parallaxX);
                const dy = y - (mouseY + parallaxY);
                if(Math.sqrt(dx*dx + dy*dy) < 25) hovered = s;

                ctx.globalAlpha = 0.4 + Math.abs(Math.sin(Date.now()*0.001 + s.p)) * 0.6;
                ctx.shadowBlur = 8; ctx.shadowColor = "#d4af37";
                ctx.fillStyle = "#f3e5ab";
                ctx.beginPath(); ctx.arc(x, y, 2, 0, Math.PI*2); ctx.fill();
            });

            if(hovered) {
                ctx.globalAlpha = 1; ctx.shadowBlur = 0; ctx.fillStyle = "#d4af37";
                ctx.font = "italic 15px Lora"; ctx.textAlign = "center";
                ctx.fillText(hovered.name, hovered.rx * width, (hovered.ry * height) - 15);
            }
            requestAnimationFrame(draw);
        }

        // --- INTERAÇÃO & FADE-IN ---
        window.onload = () => document.body.classList.add('loaded');
        window.onresize = resize;
        
        window.addEventListener('mousemove', e => {
            mouseX = e.clientX; mouseY = e.clientY;
            parallaxX = (e.clientX - window.innerWidth/2) * 0.04;
            parallaxY = (e.clientY - window.innerHeight/2) * 0.04;
            document.getElementById('sky-container').style.transform = `translate(${-parallaxX}px, ${-parallaxY}px)`;
        });

        // MODAL LOGIC
        const modal = document.getElementById('modal');
        document.getElementById('open-modal-btn').onclick = () => {
            modal.classList.add('active');
            document.getElementById('step-1').style.display = 'block';
            document.getElementById('step-2').style.display = 'none';
        };
        document.getElementById('close-modal-btn').onclick = () => modal.classList.remove('active');

        document.getElementById('verify-code-btn').onclick = () => {
            const code = document.getElementById('secret-code').value.toLowerCase().trim();
            if(['disciplina', 'luz', 'aeternum'].includes(code)) {
                document.getElementById('step-1').style.display = 'none';
                document.getElementById('step-2').style.display = 'block';
            } else {
                const err = document.getElementById('error-step-1');
                err.textContent = "A mente ainda não está pronta."; err.style.opacity = 1;
            }
        };

        document.getElementById('add-star-btn').onclick = async () => {
            let n = document.getElementById('insta-handle').value.trim();
            if(!n) return;
            if(!n.startsWith('@')) n = '@' + n;

            if(globalStars.some(s => s.name.toLowerCase() === n.toLowerCase())) {
                alert("Este nome já eternizado."); return;
            }

            await push(starsRef, { name: n, rx: Math.random(), ry: Math.random(), p: Math.random()*20 });
            modal.classList.remove('active');
            document.getElementById('insta-handle').value = "";
        };

        resize(); draw();
    </script>
</body>
</html>
