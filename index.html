<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Céu dos Nomes</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&family=Great+Vibes&family=Lora:ital@0;1&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #d4af37;
            --gold-bright: #f9eeb1;
            --sky-deep: #020611;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--sky-deep);
            color: white; font-family: 'Lora', serif;
            overflow: hidden;
        }

        /* --- BACKGROUND ARTÍSTICO --- */
        #sky-wrapper {
            position: fixed; width: 100vw; height: 100vh;
            background: 
                radial-gradient(circle at 50% 100%, #1a2a44 0%, transparent 50%), /* Brilho do horizonte */
                linear-gradient(to bottom, #020611 0%, #050b1a 100%);
            z-index: -1;
        }

        /* Simulação de Nuvens */
        .clouds {
            position: absolute; bottom: 0; width: 100%; height: 40%;
            background: url('https://www.transparenttextures.com/patterns/clouds.png');
            opacity: 0.2; pointer-events: none;
        }

        canvas { position: absolute; top: 0; left: 0; }

        /* --- ELEMENTOS CENTRAIS --- */
        main {
            height: 100vh; display: flex; flex-direction: column;
            align-items: center; justify-content: space-between;
            padding: 60px 20px; text-align: center;
            box-sizing: border-box;
        }

        .title-group h1 {
            font-family: 'Cinzel', serif; font-weight: 400; font-size: 2.2rem;
            letter-spacing: 2px; line-height: 1.4; margin: 0;
            text-shadow: 0 0 15px rgba(255,255,255,0.3);
        }

        /* --- AS TRÊS GARÇAS --- */
        .herons-container {
            position: absolute; top: 45%; width: 100%; max-width: 800px;
            height: 300px; pointer-events: none;
        }

        .heron-unit {
            position: absolute; display: flex; flex-direction: column; align-items: center;
            animation: float-slow 8s ease-in-out infinite alternate;
        }

        .heron-img { width: 120px; filter: drop-shadow(0 0 10px white); }
        
        .lantern {
            width: 30px; height: 40px; background: radial-gradient(#fff, var(--gold));
            border-radius: 5px; margin-top: -10px; position: relative;
            box-shadow: 0 0 30px 10px rgba(212, 175, 55, 0.6);
            display: flex; align-items: center; justify-content: center;
        }
        .lantern::after { content: '@'; color: var(--sky-deep); font-weight: bold; font-size: 14px; }

        .heron-name {
            font-family: 'Great Vibes', cursive; color: var(--gold-bright);
            font-size: 1.8rem; margin-top: 15px; text-shadow: 0 0 10px black;
        }

        /* Posicionamento conforme a imagem */
        .hu1 { left: 10%; top: 0; animation-delay: 0s; }
        .hu2 { left: 40%; top: -60px; animation-delay: -2s; }
        .hu3 { left: 70%; top: 10px; animation-delay: -4s; }

        @keyframes float-slow {
            from { transform: translateY(0px) rotate(-2deg); }
            to { transform: translateY(-25px) rotate(2deg); }
        }

        /* --- RODAPÉ --- */
        .footer-info {
            z-index: 10; font-family: 'Cinzel', serif; letter-spacing: 3px;
        }
        .footer-info span { color: var(--gold-bright); font-size: 1.2rem; }

        .horizon-glow {
            position: absolute; bottom: 0; width: 100%; height: 4px;
            background: var(--gold); box-shadow: 0 0 40px 10px var(--gold);
            opacity: 0.4;
        }

        /* --- BOTÃO ENTRAR --- */
        .btn-enter {
            background: transparent; border: 1px solid var(--gold);
            color: var(--gold); padding: 12px 40px; cursor: pointer;
            font-family: 'Cinzel'; letter-spacing: 2px; margin-top: 20px;
            transition: 0.3s; pointer-events: auto;
        }
        .btn-enter:hover { background: var(--gold); color: black; }

        /* Modal estilizado conforme a imagem */
        .modal {
            position: fixed; top:0; left:0; width:100%; height:100%;
            background: rgba(0,0,0,0.9); display:none; align-items:center; justify-content:center;
            z-index: 100; backdrop-filter: blur(5px);
        }
        .modal-content {
            border: 1px solid var(--gold); padding: 40px; background: var(--sky-deep);
            max-width: 400px; width: 90%; text-align: center;
        }
        input {
            background: transparent; border: none; border-bottom: 1px solid var(--gold);
            color: white; width: 100%; padding: 10px; margin: 20px 0; outline: none; text-align: center;
        }
    </style>
</head>
<body>

    <div id="sky-wrapper">
        <canvas id="starsCanvas"></canvas>
        <div class="clouds"></div>
        <div class="horizon-glow"></div>
    </div>

    <main>
        <div class="title-group">
            <h1>Alguns nomes não desaparecem.<br>Eles ficam no céu.</h1>
            <button class="btn-enter" onclick="openModal()">entrar no céu</button>
        </div>

        <div class="herons-container">
            <div class="heron-unit hu1">
                <img src="https://svgshare.com/i/157u.svg" class="heron-img">
                <div class="lantern"></div>
                <div class="heron-name">@junior</div>
            </div>
            <div class="heron-unit hu2">
                <img src="https://svgshare.com/i/157u.svg" class="heron-img">
                <div class="lantern"></div>
                <div class="heron-name">@Holly</div>
            </div>
            <div class="heron-unit hu3">
                <img src="https://svgshare.com/i/157u.svg" class="heron-img">
                <div class="lantern"></div>
                <div class="heron-name">@denise</div>
            </div>
        </div>

        <div class="footer-info">
            lugares ocupados: <span id="counter">00003</span> / 333333
        </div>
    </main>

    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 style="font-family: Cinzel; color: var(--gold);">Eternizar Nome</h2>
            <div id="step-1">
                <input type="password" id="secret" placeholder="CÓDIGO SECRETO">
                <button class="btn-enter" onclick="checkCode()">Validar</button>
            </div>
            <div id="step-2" style="display:none">
                <input type="text" id="insta" placeholder="@seu-instagram">
                <button class="btn-enter" onclick="addName()">Subir ao Céu</button>
            </div>
            <p onclick="closeModal()" style="margin-top:20px; cursor:pointer; font-size:12px; color: grey;">FECHAR</p>
        </div>
    </div>

    <script type="module">
        // Importação do Firebase conforme configurado anteriormente
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // CONFIGURAÇÃO DO SEU FIREBASE AQUI
        const firebaseConfig = {
            apiKey: "SUA_API_KEY",
            databaseURL: "SUA_URL",
            projectId: "SEU_ID",
            appId: "SEU_APP_ID"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const starsRef = ref(db, 'stars');

        // --- CANVAS DE ESTRELAS ---
        const canvas = document.getElementById('starsCanvas');
        const ctx = canvas.getContext('2d');
        let stars = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }

        window.addEventListener('resize', resize);
        resize();

        // Desenho das estrelas estáticas e dinâmicas
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Estrelas pequenas ao fundo
            for(let i=0; i<150; i++) {
                ctx.fillStyle = "rgba(255,255,255," + Math.random() + ")";
                ctx.beginPath();
                ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height, Math.random()*1.5, 0, Math.PI*2);
                ctx.fill();
            }

            // Estrelas dos usuários (Douradas)
            stars.forEach(s => {
                ctx.shadowBlur = 15;
                ctx.shadowColor = "#d4af37";
                ctx.fillStyle = "#f9eeb1";
                ctx.beginPath();
                ctx.arc(s.x * canvas.width, s.y * canvas.height, 2, 0, Math.PI*2);
                ctx.fill();
            });
            requestAnimationFrame(draw);
        }
        draw();

        // Sincronização Firebase
        onValue(starsRef, (snap) => {
            const data = snap.val();
            stars = data ? Object.values(data) : [];
            const count = (stars.length + 3).toString().padStart(5, '0');
            document.getElementById('counter').innerText = count;
        });

        // Funções de Interface
        window.openModal = () => document.getElementById('modal').style.display = 'flex';
        window.closeModal = () => document.getElementById('modal').style.display = 'none';
        
        window.checkCode = () => {
            if(document.getElementById('secret').value === 'disciplina') {
                document.getElementById('step-1').style.display = 'none';
                document.getElementById('step-2').style.display = 'block';
            }
        };

        window.addName = () => {
            const name = document.getElementById('insta').value;
            if(name) {
                push(starsRef, { name, x: Math.random(), y: Math.random() });
                closeModal();
            }
        };
    </script>
</body>
</html>
